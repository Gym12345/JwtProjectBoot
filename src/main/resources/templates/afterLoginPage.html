<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Logout Example</title>
    <script>
       const storageToken = localStorage.getItem('jwtToken');
      // Retrieve the token from the URL
      const urlToken = getQueryParameter('token');
                console.log('Extracted Token:', urlToken); 
               
	
      
      function getQueryParameter(name) {
                 const urlParams = new URLSearchParams(window.location.search);
                 return urlParams.get(name);
             }
      
      function logout() {
    	    var token = localStorage.getItem('jwtToken');
    	   
    	   
    	    $.ajax({
    	        type: "POST",
    	        url: "/auth/logout",
    	        headers: {
    	            "token-for-blacklist":token
    	        },
    	        contentType: "application/json",
    	        success: function (response) {
    	            if (response==1) {
    	            	alert("로그아웃 성공");
    	            	localStorage.removeItem('jwtToken');
    	                window.location.href = '/auth/loginMenu'; 
    	            } else {
    	                alert("로그아웃 실패");
    	            }
    	        },
    	        error: function (xhr, status, error) {
    	            console.log("logout failed");
    	            alert("로그아웃 실패");
    	        }
    	    });
      }
  
     function test(){
    	 window.location.href ='/normalUser/test?token='+urlToken;
     }
     function aiConnectionTest(){    //jupyter notebook 연결
    	 window.location.href ='/admin/aiConnectionTest?token='+urlToken;
     }            
                 
    </script>
     <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
</head>
<body>
    <button onclick="logout()">Log out</button>
    <button onclick="test()">testRedirect</button>
    
    <button onclick="aiConnectionTest()">AI-TEST</button>
    afterLoginPage
  
    
</body>
</html>